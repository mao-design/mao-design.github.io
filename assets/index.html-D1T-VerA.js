import{_ as e,c as i,a as t,o as a}from"./app-CNIuUWnT.js";const n={};function l(d,s){return a(),i("div",null,s[0]||(s[0]=[t(`<blockquote><p>本教程基于CentOS 7搭建</p></blockquote><h2 id="安装cloudreve" tabindex="-1"><a class="header-anchor" href="#安装cloudreve"><span>安装cloudreve</span></a></h2><p>下载cloudreve安装包</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">wget</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://labfileapp.oss-cn-hangzhou.aliyuncs.com/cloudreve_3.3.1_linux_amd64.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>解压cloudreve安装包</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>tar -zxvf cloudreve_3.3.1_linux_amd64.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>给cloudreve授予权限</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">chmod</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +x</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./cloudreve</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>运行cloudreve</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">./cloudreve</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>刚开始运行cloudreve会有一个初始化管理员账号和密码，这两个要记下来</p><p>打开浏览器，访问http://公网地址:5212，依次输入管理员账号和密码，单击<strong>登录</strong></p><p>按下Ctrl + C组合键停止cloudreve运行</p><h2 id="安装ossfs" tabindex="-1"><a class="header-anchor" href="#安装ossfs"><span>安装ossfs</span></a></h2><p>ossfs能让您在Linux系统中，将对象存储OSS的存储空间（Bucket）挂载到本地文件系统中，您能够像操作本地文件一样操作OSS的对象（Object），实现数据的共享。</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">wget</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://gosspublic.alicdn.com/ossfs/ossfs_1.80.6_centos8.0_x86_64.rpm</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -y</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./ossfs_1.80.6_centos8.0_x86_64.rpm</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>执行如下命令，配置账号访问信息，将<strong>Bucket名称</strong>以及具有此Bucket访问权限的<code>AccessKey ID</code>和<code>AccessKey Secret</code>信息存放在<code>/etc/passwd-ossfs</code>文件中</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> BucketName:yourAccessKeyId:yourAccessKeySecret</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/passwd-ossfs</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>BucketName：阿里云OSS控制台中创建的bucket名称</p><p>yourAccessKeyId：具有此Bucket访问权限的AccessKey ID</p><p>yourAccessKeySecret：具有此Bucket访问权限的AccessKey Secret</p></blockquote><hr><p>给passwd-ossfs文件授予权限</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">chmod</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 640</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/passwd-ossfs</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="挂载oss" tabindex="-1"><a class="header-anchor" href="#挂载oss"><span>挂载OSS</span></a></h2><p>创建一个名为oss文件夹</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> oss</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>执行如下命令，将Bucket挂载到指定目录oss，您需要将命令中的BucketName、mountfolder(挂载文件夹的名称)和Endpoint替换成实验室提供的<strong>bucket名称</strong>、创建的<strong>oss文件夹</strong>和OSS的<strong>内网Endpoint</strong></p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ossfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> BucketName</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mountfolder</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -o</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> url=Endpoint</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>查看是否挂载成功</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">df</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -h</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果显示有 <code>ossfs</code> 字样的就说明挂载成功</p><p>在<code>/etc/init.d/</code>目录下建立文件ossfs，设置开机自动启动脚本进行OSS挂载</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/init.d/ossfs</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在ossfs中添加如下内容</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#! /bin/bash</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ossfs Automount Aliyun OSS Bucket in the specified direcotry.</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># chkconfig: 2345 90 10</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># description: Activates/Deactivates ossfs configured to start at boot time.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ossfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> BucketName</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mountfolder</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -o</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> url=Endpoint</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -oallow_other</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>您需要将脚本中的BucketName、mountfolder和Endpoint替换成自己的<strong>bucket名称</strong>、创建的<strong>oss文件夹</strong>和OSS的<strong>内网Endpoint</strong></p><p>为新建立的ossfs脚本赋予可执行权限</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">chmod</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a+x</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/init.d/ossfs</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>把ossfs启动脚本作为其他服务，开机自动启动</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">chkconfig</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ossfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> on</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="运行cloudreve" tabindex="-1"><a class="header-anchor" href="#运行cloudreve"><span>运行cloudreve</span></a></h2><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">./cloudreve</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>打开浏览器，访问http://公网地址:5212，依次输入管理员账号和密码，单击登录</p><blockquote><p>在cloudreve主界面右上角(一个灰色的头像)</p><p>单击<strong>管理面板</strong>；在<strong>确定站点URL设置</strong>对话框中，单击<strong>更改</strong>；</p><p>在左侧导航栏中，单击<strong>存储策略</strong>；在<strong>存储策略</strong>页面，单击<strong>添加存储策略</strong>；</p><p>在<strong>选择存储方式</strong>对话框中，选择<strong>本机存储</strong>；</p><p>在<strong>添加本机存储策略</strong>的<strong>上传路径</strong>页面中，将存储目录修改为<code>oss（oss为挂载的文件夹）/Object路径/{uid}/{path}</code> 后面的<code>/{uid}/{path}</code>可以不用管，单击<strong>下一步</strong>；</p><p>在<strong>添加本机存储策略</strong>的<strong>直链设置</strong>页面中，单击<strong>下一步</strong>；</p><p>在<strong>添加本机存储策略</strong>的<strong>上传限制</strong>页面中，单击<strong>下一步</strong>；</p><p>在<strong>添加本机存储策略</strong>的<strong>完成</strong>页面中，输入存储策略名为<strong>OSS</strong>（也就是自己创建的挂载文件夹的名称），单击<strong>完成</strong></p></blockquote><p>在左侧导航栏中，单击<strong>用户组</strong>；在用户组页面中，单击管理员操作中的编辑图标；在<strong>编辑管理员</strong>页面的<strong>存储策略</strong>中，选择<strong>oss</strong>，其它选项默认，然后单击<strong>保存</strong>；在右上角旁边有个小房子图标按钮，单击<strong>返回主页</strong>，就可以上传文件了</p><p>你也可以进入设置修改管理员名称以及管理员密码</p><p>上传的文件存储在自己的oss服务器中，在oss服务器中查看自己上传的文件</p><p>首先在浏览器中输入一下网址，进入到自己的OSS服务器的控制面板</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">https://oss.console.aliyun.com/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在左侧导航栏中，单击<strong>Bucket列表</strong></p><p>在<strong>Bucket</strong>页面，找到自己的Bucket，单击<strong>Bucket名称</strong></p><p>在<strong>文件列表</strong>页面，单击对应的文件夹名称，进入Object路径，Object路径下有一个名为 <code>1</code> 的文件夹，该文件夹中的文件就是自己上传的文件了</p>`,51)]))}const o=e(n,[["render",l],["__file","index.html.vue"]]),c=JSON.parse('{"path":"/server/9zw1h4dl/","title":"ESC+OSS搭建个人网盘","lang":"zh-CN","frontmatter":{"title":"ESC+OSS搭建个人网盘","createTime":"2024/12/02 00:33:32","permalink":"/server/9zw1h4dl/","description":"本教程基于CentOS 7搭建 安装cloudreve 下载cloudreve安装包 解压cloudreve安装包 给cloudreve授予权限 运行cloudreve 刚开始运行cloudreve会有一个初始化管理员账号和密码，这两个要记下来 打开浏览器，访问http://公网地址:5212，依次输入管理员账号和密码，单击登录 按下Ctrl + C组...","head":[["meta",{"property":"og:url","content":"https://mao-design.pages.dev/server/9zw1h4dl/"}],["meta",{"property":"og:site_name","content":"Mao-Design的博客"}],["meta",{"property":"og:title","content":"ESC+OSS搭建个人网盘"}],["meta",{"property":"og:description","content":"本教程基于CentOS 7搭建 安装cloudreve 下载cloudreve安装包 解压cloudreve安装包 给cloudreve授予权限 运行cloudreve 刚开始运行cloudreve会有一个初始化管理员账号和密码，这两个要记下来 打开浏览器，访问http://公网地址:5212，依次输入管理员账号和密码，单击登录 按下Ctrl + C组..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-12-08T06:01:53.000Z"}],["meta",{"property":"article:modified_time","content":"2024-12-08T06:01:53.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"ESC+OSS搭建个人网盘\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-12-08T06:01:53.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":3.6,"words":1079},"git":{"updatedTime":1733637713000,"contributors":[{"name":"mao-design","email":"2781406006@qq.com","commits":1,"avatar":"https://avatars.githubusercontent.com/mao-design?v=4","url":"https://github.com/mao-design"}]},"autoDesc":true,"filePathRelative":"notes/Server/ESC+OSS搭建个人网盘.md","bulletin":false}');export{o as comp,c as data};
